import{r as l,j as e,M as ce,R as Z,F as ie,a as ee,l as te,i as se,b as ne,c as re,d as de}from"./vendor-Crur0c74.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=i(a);fetch(a.href,n)}})();const _=l.createContext({selectionStudy:null,selectionSemester:null,setSelectionStudy:()=>{},setSelectionSemester:()=>{},getFriendlyStudyName:()=>null,getFriendlySemesterName:()=>null,getCourses:()=>[],getOtherCoursesForStudy:()=>[],getCalendarEvents:()=>[],addRelevantCourse:()=>{},studyOptions:{},semesterOptions:{}}),ue="userFieldOfStudy",me="userSemester",J="relevantEvents",he=({children:s})=>{const[t,i]=l.useState(null),[o,a]=l.useState(null),[n,f]=l.useState({}),[r,c]=l.useState({}),[d,p]=l.useState({}),[C,k]=l.useState(0);l.useEffect(()=>{const u=localStorage.getItem(ue),x=localStorage.getItem(me);u&&i(u),u&&x&&a(x)},[]),l.useEffect(()=>{(async()=>{try{const x=await fetch("courses.json");if(!x.ok)throw new Error("Failed to fetch courses");const b=await x.json();f(b)}catch(x){console.error("Error fetching courses:",x)}})()},[]),l.useEffect(()=>{(async()=>{try{const x=await fetch("options.json");if(!x.ok)throw new Error("Failed to fetch options");const b=await x.json();c(b.studyOptions),p(b.semesterOptions)}catch(x){console.error("Error fetching options:",x)}})()},[]);const g=l.useMemo(()=>Object.fromEntries(Object.entries(r).filter(([u])=>{const x=n[u];return x?Object.values(x).some(b=>b.length>0):!1})),[r,n]),j=l.useMemo(()=>{if(!t||!n[t])return{};const u=n[t];return Object.fromEntries(Object.entries(d).filter(([x])=>{const b=u[x];return b&&b.length>0}))},[d,n,t]),v=u=>u&&r[u]||null,P=u=>u&&d[u]||null;function A(u){const x=/^(\d{2})\.(\d{2})\.(\d{4})$/.exec(u);if(!x)return null;const[,b,E,I]=x;return new Date(Number(I),Number(E)-1,Number(b))}const T=u=>{const x=JSON.parse(localStorage.getItem(J)||"[]");if(u.klausurdate){const b=A(u.klausurdate)||new Date(u.klausurdate);if(b&&!isNaN(b.getTime())){const E=`${u.key}_Klausur_${b.toISOString().slice(0,10)}`;x.includes(E)||x.push(E)}}Array.isArray(u.lectures)&&u.lectures.forEach(b=>{const E=`${u.key}_${b.type}_${b.day}_${b.start}`;x.includes(E)||x.push(E)}),localStorage.setItem(J,JSON.stringify(x)),k(b=>b+1)},m=()=>{var I;if(!t)return[];const u=o?((I=n[t])==null?void 0:I[o])||[]:[],x=JSON.parse(localStorage.getItem(J)||"[]"),b=new Set(x.map($=>$.split("_")[0])),E=[];return n[t]&&Object.values(n[t]).forEach($=>{$.forEach(R=>{b.has(String(R.key))&&!u.some(K=>K.key===R.key)&&!E.some(K=>K.key===R.key)&&E.push(R)})}),[...u,...E]},S=()=>{if(!t)return[];const u=n[t];if(!u)return[];const x=[];for(const b in u)b!==o&&x.push(...u[b]);return x},F=()=>{const u=m(),x=[],b=new Date("2025-04-01"),E=new Date("2025-07-18"),I=JSON.parse(localStorage.getItem("notRelevantEvents")||"[]"),$=JSON.parse(localStorage.getItem(J)||"[]"),R={Montag:1,Dienstag:2,Mittwoch:3,Donnerstag:4,Freitag:5,Samstag:6,Sonntag:0},K=y=>{x.some(D=>{var h,N;return((h=D.extendedProps)==null?void 0:h.seriesKey)===((N=y.extendedProps)==null?void 0:N.seriesKey)&&D.start===y.start})||x.push(y)};return Object.values(n).forEach(y=>Object.values(y).forEach(D=>D.forEach(h=>{let N=null;if(h.klausurdate&&(N=A(h.klausurdate)||new Date(h.klausurdate)),N&&!isNaN(N.getTime())){N.setHours(9,0,0,0);const w=new Date(N);w.setHours(12,0,0,0);const O=`${h.key}_Klausur_${N.toISOString().slice(0,10)}`;$.includes(O)&&!I.includes(O)&&K({title:`Klausur: ${h.name} (${h.room})`,start:N.toISOString().slice(0,16),end:w.toISOString().slice(0,16),description:`Klausur für ${h.name} im Raum ${h.room}`,extendedProps:{lecturer:h.lecturer,room:h.room,type:"Klausur",seriesKey:O}})}Array.isArray(h.lectures)&&h.lectures.forEach(w=>{const O=new Date(b),H=R[w.day];if(H===void 0)return;const G=(H+7-O.getDay())%7;O.setDate(O.getDate()+G);const[V,L]=w.start.split(":").map(Number),z=`${h.key}_${w.type}_${w.day}_${w.start}`;if($.includes(z)&&!I.includes(z))for(let M=new Date(O);M<=E;M.setDate(M.getDate()+7)){const U=new Date(M);U.setHours(V,L,0,0);const q=new Date(U);q.setMinutes(q.getMinutes()+Number(w.duration)),K({title:`${h.name} (${w.room||h.room})`,start:U.toISOString().slice(0,16),end:q.toISOString().slice(0,16),description:`${h.name} (${w.room||h.room})`,extendedProps:{lecturer:h.lecturer,room:w.room||h.room,type:w.type,seriesKey:z}})}})}))),u.forEach(y=>{let D=null;if(y.klausurdate&&(D=A(y.klausurdate)||new Date(y.klausurdate)),D&&!isNaN(D.getTime())){D.setHours(9,0,0,0);const h=new Date(D);h.setHours(12,0,0,0);const N=`${y.key}_Klausur_${D.toISOString().slice(0,10)}`;!I.includes(N)&&!$.includes(N)&&K({title:`Klausur: ${y.name} (${y.room})`,start:D.toISOString().slice(0,16),end:h.toISOString().slice(0,16),description:`Klausur für ${y.name} im Raum ${y.room}`,extendedProps:{lecturer:y.lecturer,room:y.room,type:"Klausur",seriesKey:N}})}Array.isArray(y.lectures)&&y.lectures.forEach(h=>{const N=new Date(b),w=R[h.day];if(w===void 0)return;const O=(w+7-N.getDay())%7;N.setDate(N.getDate()+O);const[H,G]=h.start.split(":").map(Number),V=`${y.key}_${h.type}_${h.day}_${h.start}`;if(!(I.includes(V)||$.includes(V)))for(let L=new Date(N);L<=E;L.setDate(L.getDate()+7)){const z=new Date(L);z.setHours(H,G,0,0);const M=new Date(z);M.setMinutes(M.getMinutes()+Number(h.duration)),K({title:`${y.name} (${h.room||y.room})`,start:z.toISOString().slice(0,16),end:M.toISOString().slice(0,16),description:`${y.name} (${h.room||y.room})`,extendedProps:{lecturer:y.lecturer,room:h.room||y.room,type:h.type,seriesKey:V}})}})}),x};return e.jsx(_.Provider,{value:{selectionStudy:t,selectionSemester:o,setSelectionStudy:i,setSelectionSemester:a,getFriendlyStudyName:v,getFriendlySemesterName:P,getCourses:m,getOtherCoursesForStudy:S,getCalendarEvents:F,addRelevantCourse:T,studyOptions:g,semesterOptions:j},children:s},C)},ae=()=>{const{selectionStudy:s,selectionSemester:t,setSelectionStudy:i,setSelectionSemester:o,studyOptions:a,semesterOptions:n}=l.useContext(_),f=d=>{const p=d.target.value;i(p),o(null),localStorage.setItem("userFieldOfStudy",p),localStorage.removeItem("userSemester")},r=d=>{const p=d.target.value;o(p),localStorage.setItem("userSemester",p)},c=s?Object.entries(n).map(([d,p])=>({value:d,label:p})):[];return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-gray-100",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-blue-700",children:"Willkommen zur Auswahlseite"}),e.jsx("div",{className:"w-full max-w-xs space-y-4",children:s?t?e.jsx(e.Fragment,{}):e.jsxs("select",{defaultValue:"",onChange:r,className:"w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"",disabled:!0,children:"Bitte zweite Auswahl treffen..."}),c.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))]},s):e.jsxs("select",{defaultValue:"",onChange:f,className:"w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"",disabled:!0,children:"Bitte erste Auswahl treffen..."}),Object.entries(a).map(([d,p])=>e.jsx("option",{value:d,children:p},d))]})})]})},xe=()=>{const{selectionStudy:s,selectionSemester:t,setSelectionStudy:i,setSelectionSemester:o,getFriendlyStudyName:a,getFriendlySemesterName:n}=l.useContext(_),f=()=>{i(null),o(null),localStorage.removeItem("userFieldOfStudy"),localStorage.removeItem("userSemester")},r=a(s),c=n(t);return e.jsx("header",{className:"bg-blue-700 text-white shadow-md",children:e.jsxs("div",{className:"container mx-auto flex items-center justify-between py-4 px-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"icon.svg",alt:"Logo",className:"h-8 w-8"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Student Landing Page"})]}),e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsx("ul",{className:"flex space-x-4 border-r border-l border-gray-400 pr-8 mr-8 pl-8",children:e.jsx("li",{children:e.jsx("a",{href:"/public",className:"hover:underline",children:"Home"})})}),e.jsxs("div",{className:"text-xs text-gray-300 flex flex-col items-end",children:[r&&e.jsx("span",{children:r}),c&&e.jsx("span",{children:c})]}),e.jsx("button",{onClick:f,className:"flex items-center bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",title:"Studienwahl und Semester zurücksetzen",children:e.jsx(ce,{size:20})})]})]})})},W=({title:s,children:t})=>e.jsxs("div",{className:"w-full h-full bg-white shadow-xl border border-gray-200 rounded-lg p-6 pt-0 flex flex-col overflow-y-scroll",children:[e.jsxs("div",{className:"sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-2 mt-6",children:s}),e.jsx("hr",{className:"border-gray-300"})]}),e.jsx("div",{className:"flex-grow pt-4",children:t})]}),ge=({children:s})=>e.jsx("div",{className:"w-full h-[300vh] md:h-full overflow-hidden flex flex-col md:grid md:grid-cols-3 gap-6 bg-gray-100 p-4 rounded-lg shadow-md",children:Z.Children.toArray(s).map((t,i)=>e.jsx("div",{className:"flex-1 h-full overflow-hidden",children:t},i))}),fe=({sender:s,subject:t,content:i,read:o,onClick:a})=>e.jsxs("div",{className:`w-full bg-white shadow-md border border-gray-300 rounded-lg p-2 hover:bg-gray-100 cursor-pointer relative ${o?"opacity-75":"font-bold"}`,onClick:a,children:[!o&&e.jsx("span",{className:"absolute top-2 right-2 text-blue-500",children:"●"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s}),e.jsx("div",{className:"text-sm font-semibold text-gray-800 truncate",children:t}),e.jsx("div",{className:"text-xs text-gray-600 mt-1 truncate",children:i})]})]}),pe=({senderName:s,senderEmail:t,subject:i,content:o,cc:a,attachments:n,onClose:f})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-3xl relative",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:f,children:"×"}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:i}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Von: ",s," <",t,">"]}),a&&a.length>0&&e.jsxs("p",{className:"text-sm text-gray-500",children:["CC: ",a.join(", ")]})]}),n&&n.length>0&&e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Anhänge:"}),e.jsx("div",{className:"max-h-12",children:e.jsx("ul",{className:"list-disc list-inside text-gray-800",children:n.map((r,c)=>e.jsx("li",{children:r},c))})})]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-4",children:e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:o})}),e.jsx("div",{className:"border-t border-gray-300 pt-4 mt-4 flex justify-end",children:e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>alert("Reply functionality not implemented yet"),children:"Antworten"})})]})}),be=()=>{const[s,t]=l.useState(null),[i,o]=l.useState(!1),[a,n]=l.useState([{senderName:"Professor Müller",senderEmail:"mueller@university.de",subject:"Raumänderung",content:"Die morgige Vorlesung findet im Raum 204 statt, anstatt in Raum 101. Bitte beachten Sie diese Änderung.",cc:["assistenz@university.de"],attachments:["Vorlesungsplan.pdf"]},{senderName:"Universitätsverwaltung",senderEmail:"verwaltung@university.de",subject:"Erinnerung an Rückmeldung",content:"Bitte stellen Sie sicher, dass Ihre Studiengebühren bis Ende des Monats bezahlt sind, um Verzögerungen zu vermeiden.",cc:[],attachments:[]},{senderName:"Bibliotheksdienst",senderEmail:"bibliothek@university.de",subject:"Überfällige Buchrückgabe",content:'Das Buch "Einführung in Algorithmen" ist überfällig. Bitte geben Sie es so bald wie möglich zurück.',cc:["student1@university.de","student2@university.de"],attachments:[]},{senderName:"Karrierezentrum",senderEmail:"karriere@university.de",subject:"Praktikumsmöglichkeiten",content:"Entdecken Sie die neuesten Praktikumsmöglichkeiten in Ihrem Studienbereich.",cc:[],attachments:["Praktikumsliste.pdf"]},{senderName:"Studierendenrat",senderEmail:"studierendenrat@university.de",subject:"Bevorstehendes Event: Hackathon",content:"Nehmen Sie dieses Wochenende am jährlichen Hackathon teil. Preise für die besten Teams!",cc:["team@university.de"],attachments:["HackathonDetails.pdf","Anmeldeformular.pdf"]},{senderName:"IT-Support",senderEmail:"support@university.de",subject:"Systemwartungsbenachrichtigung",content:"Das Universitätsportal wird am Samstag von 2 Uhr bis 6 Uhr wegen Wartungsarbeiten nicht verfügbar sein.",cc:[],attachments:[]},{senderName:"Kurskoordinator",senderEmail:"koordinator@university.de",subject:"Erinnerung an Abgabefrist",content:'Vergessen Sie nicht, Ihre Aufgabe für "Datenstrukturen" bis Freitag einzureichen.',cc:["professor@university.de"],attachments:["Aufgabenbeschreibung.pdf"]},{senderName:"Sportverein",senderEmail:"sport@university.de",subject:"Wöchentlicher Trainingsplan",content:"Der Trainingsplan für diese Woche wurde aktualisiert. Siehe die angehängte Datei.",cc:[],attachments:["Trainingsplan.pdf"]},{senderName:"Studierendenservice",senderEmail:"service@university.de",subject:"Verfügbarkeit von Beratungsterminen",content:"Neue Termine für Beratungssitzungen sind jetzt verfügbar. Buchen Sie noch heute Ihren Termin.",cc:["beratung@university.de"],attachments:[]},{senderName:"Campus-Sicherheit",senderEmail:"sicherheit@university.de",subject:"Sicherheitswarnung",content:"Bitte seien Sie vorsichtig im Bereich des Hauptparkplatzes aufgrund laufender Bauarbeiten.",cc:[],attachments:["Sicherheitsrichtlinien.pdf"]},{senderName:"Projektleiter",senderEmail:"projektleiter@university.de",subject:"Projektabschlussbericht",content:"Der Abschlussbericht des Projekts wurde fertiggestellt. Bitte überprüfen Sie die angehängten Dateien.",cc:["team@university.de","supervisor@university.de"],attachments:["Bericht.pdf","Diagramm1.png","Diagramm2.png","Diagramm3.png","Diagramm4.png","Diagramm5.png","Diagramm6.png","Diagramm7.png","Diagramm8.png","Diagramm9.png","Diagramm10.png"]}]),f=c=>{t(c),o(!0),n(d=>d.map(p=>p===c?{...p,read:!0}:p))},r=()=>{o(!1),t(null)};return e.jsxs("div",{className:"space-y-4",children:[a.map((c,d)=>e.jsx(fe,{sender:c.senderName,subject:c.subject,content:c.content,read:c.read,onClick:()=>f(c)},d)),i&&s&&e.jsx(pe,{senderEmail:s.senderEmail,senderName:s.senderName,subject:s.subject,content:s.content,cc:s.cc,attachments:s.attachments,onClose:r})]})},oe=({subtitle:s,children:t,defaultOpen:i=!1,storageKey:o})=>{const[a,n]=l.useState(i);l.useEffect(()=>{const r=localStorage.getItem(o);r!==null&&n(r==="true")},[o]);const f=()=>{n(r=>(localStorage.setItem(o,(!r).toString()),!r))};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer py-2 border-b border-gray-300",onClick:f,children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),e.jsx("span",{className:"text-gray-500",children:a?"-":"+"})]}),a&&e.jsx("div",{className:"mt-2 text-gray-600",children:t})]})},ye=({children:s})=>e.jsx("div",{className:"flex flex-wrap -mx-2",children:Z.Children.map(s,(t,i)=>e.jsx("div",{className:"w-full xl:w-1/2 px-2 mb-4",children:t},i))}),le=({subtitle:s,href:t})=>e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs font-medium text-blue-600 hover:underline",children:[s,e.jsx(ie,{className:"ml-1",size:14})]}),Y="absolute px-3 py-1 text-sm rounded border border-blue-500 text-blue-500 bg-transparent hover:bg-blue-100 transition-colors",je=({name:s,room:t,lecturer:i,moduldatenbankUrl:o,anmeldenUrl:a,pvl:n="Keine",klausurdate:f,credits:r,hilfsmittel:c,courseKey:d})=>{const[p,C]=l.useState(!1);return e.jsxs("div",{className:`relative w-full min-h-[140px] bg-blue-50 rounded-xl shadow-2xl border border-gray-300 flex flex-col items-center justify-center p-4 pt-12 pb-12 mx-auto backdrop-blur-sm  ${p?"min-h-[220px]":""}`,children:[e.jsx("button",{className:`${Y} top-2.5 right-2.5 z-10`,children:e.jsx(le,{subtitle:"Moduldatenbank",href:o})}),e.jsx("button",{className:`${Y} bottom-2.5 left-2.5`,onClick:()=>C(k=>!k),children:p?"Weniger Infos":"Mehr Infos"}),e.jsx("button",{className:`${Y} bottom-2.5 right-2.5`,children:e.jsx(le,{subtitle:"Anmelden",href:a})}),e.jsxs("span",{className:"text-center w-full text-base font-medium leading-tight",children:[e.jsx("span",{className:"text-blue-800",children:s}),e.jsx("br",{}),e.jsxs("span",{className:"text-gray-600 text-xs",children:["Raum: ",t]}),e.jsx("br",{}),e.jsxs("span",{className:"text-gray-600 text-xs",children:["Dozent: ",i]})]}),p&&e.jsx("div",{className:`w-full text-xs text-gray-700 bg-white rounded shadow-inner p-2 border border-gray-200 max-w-full overflow-hidden ${p?"mt-2 max-h-40":"max-h-0"}`,style:{zIndex:1},children:e.jsxs("dl",{className:"grid grid-cols-1 gap-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"PVL:"}),e.jsx("dd",{children:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"Klausurtermin:"}),e.jsx("dd",{children:f})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"Credits:"}),e.jsxs("dd",{children:[r," ECTS"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"Hilfsmittel:"}),e.jsx("dd",{children:c})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"Anmeldeschlüssel:"}),e.jsx("dd",{children:d})]})]})})]})},ve=()=>{const{getCourses:s}=l.useContext(_),t=s();return e.jsx(oe,{storageKey:"coursecolapsable",defaultOpen:!0,subtitle:"Kurse",children:e.jsx(ye,{children:t.map(i=>l.createElement(je,{...i,key:i.key,courseKey:i.key}))})})},B=({subtitle:s,href:t})=>e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[s,e.jsx(ie,{style:{marginLeft:4}})]})})}),Se=()=>e.jsx(B,{subtitle:"Raumservice",href:"https://raumservice.htwsaar.de/index.php?mid=998&muid=0&muuid=0"}),Ne=()=>e.jsx(B,{subtitle:"Bibliothek",href:"https://www.htwsaar.de/studium-und-lehre/service-und-beratung/rund-ums-studium/bibliothek/bibliothek"}),we=()=>e.jsx(B,{subtitle:"Mensa",href:"https://mensaar.de/#/menu/htwcas"}),Q=()=>e.jsx("div",{style:{height:"3px",width:"100%",backgroundColor:"#888",margin:"15px 0",borderRadius:"1.5px"}}),ke=()=>e.jsx(B,{subtitle:"SIM",href:"https://sim.htwsaar.de/launchpad#Shell-home"}),Ee=({event:s,onClose:t,onDeleteEvent:i})=>{if(!s)return null;const{title:o,start:a,end:n,description:f,extendedProps:r={}}=s,c=(r==null?void 0:r.type)==="custom",d=!!(r!=null&&r.allDay),p=()=>{const g=r==null?void 0:r.seriesKey;if(!(!g&&!c)){if(c){const j=`custom_${o}_${a}_${n}`,v=JSON.parse(localStorage.getItem("notRelevantEvents")||"[]");v.includes(j)||(v.push(j),localStorage.setItem("notRelevantEvents",JSON.stringify(v)))}else if(typeof g=="string"){const j=JSON.parse(localStorage.getItem("notRelevantEvents")||"[]");j.includes(g)||(j.push(g),localStorage.setItem("notRelevantEvents",JSON.stringify(j)))}t()}},C=()=>{const g=r==null?void 0:r.seriesKey;if(!(!g&&!c)){if(c){const j=`custom_${o}_${a}_${n}`,v=JSON.parse(localStorage.getItem("relevantEvents")||"[]");v.includes(j)||(v.push(j),localStorage.setItem("relevantEvents",JSON.stringify(v)))}else if(typeof g=="string"){const j=JSON.parse(localStorage.getItem("relevantEvents")||"[]");j.includes(g)||(j.push(g),localStorage.setItem("relevantEvents",JSON.stringify(j)))}t()}},k=()=>{i&&i(s)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 min-w-[300px] max-w-[90vw]",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:o}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Start:"})," ",d?new Date(a).toLocaleDateString("de-DE"):new Date(a).toLocaleString("de-DE")]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Ende:"})," ",d?new Date(n).toLocaleDateString("de-DE"):new Date(n).toLocaleString("de-DE")]}),f&&e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Beschreibung:"})," ",f]}),r&&e.jsxs("div",{className:"mb-2",children:[typeof r.lecturer=="string"&&e.jsxs("p",{children:[e.jsx("strong",{children:"Dozent:"})," ",r.lecturer]}),typeof r.room=="string"&&e.jsxs("p",{children:[e.jsx("strong",{children:"Raum:"})," ",r.room]}),typeof r.type=="string"&&!c&&e.jsxs("p",{children:[e.jsx("strong",{children:"Typ:"})," ",r.type]}),d&&e.jsxs("p",{children:[e.jsx("strong",{children:"Ganztägig:"})," Ja"]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:t,children:"Schließen"}),!c&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",onClick:p,children:"Verbergen"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:C,children:"Semesterübergreifend anzeigen"})]}),c&&i&&e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",onClick:k,children:"Löschen"})]})]})})},Ce=({initialDate:s,onClose:t,onSave:i})=>{const[o,a]=l.useState(""),[n,f]=l.useState(s||""),[r,c]=l.useState(s||""),[d,p]=l.useState(""),[C,k]=l.useState(""),[g,j]=l.useState(""),[v,P]=l.useState(!1),A=m=>{P(m.target.checked),m.target.checked&&(f(n?n.slice(0,10):""),c(r?r.slice(0,10):""))},T=m=>{m.preventDefault(),!(!o||!n||!r)&&i({title:o,start:v?n.slice(0,10):n,end:v?r.slice(0,10):r,description:d,extendedProps:{type:"custom",lecturer:C,room:g,allDay:v}})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("form",{className:"bg-white rounded-lg shadow-lg p-6 min-w-[300px] max-w-[90vw]",onSubmit:T,children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Kalendereintrag hinzufügen"}),e.jsxs("label",{className:"block mb-2",children:["Title:",e.jsx("input",{className:"w-full border p-1",value:o,onChange:m=>a(m.target.value),required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Ganztägig:",e.jsx("input",{type:"checkbox",className:"ml-2",checked:v,onChange:A})]}),e.jsxs("label",{className:"block mb-2",children:["Start:",e.jsx("input",{className:"w-full border p-1",type:v?"date":"datetime-local",value:n,onChange:m=>f(m.target.value),required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Ende:",e.jsx("input",{className:"w-full border p-1",type:v?"date":"datetime-local",value:r,onChange:m=>c(m.target.value),required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Beschreibung:",e.jsx("input",{className:"w-full border p-1",value:d,onChange:m=>p(m.target.value)})]}),e.jsxs("label",{className:"block mb-2",children:["Dozent:",e.jsx("input",{className:"w-full border p-1",value:C,onChange:m=>k(m.target.value)})]}),e.jsxs("label",{className:"block mb-2",children:["Raum:",e.jsx("input",{className:"w-full border p-1",value:g,onChange:m=>j(m.target.value)})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",onClick:t,children:"Abbrechen"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Speichern"})]})]})})},X=()=>JSON.parse(localStorage.getItem("customEvents")||"[]"),De=s=>{const t=X(),i={...s,id:crypto.randomUUID(),extendedProps:{...s.extendedProps,type:"custom"}};t.push(i),localStorage.setItem("customEvents",JSON.stringify(t))},Oe=()=>{const{getCalendarEvents:s}=l.useContext(_),[t,i]=l.useState(null),[o,a]=l.useState(!1),[n,f]=l.useState(null),[r,c]=l.useState(0),[d,p]=l.useState(!1);l.useEffect(()=>{if(!d)return;const m=S=>{S.key==="Escape"&&p(!1)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[d]);const C=m=>{const F=X().filter(u=>u.id!==m.id);localStorage.setItem("customEvents",JSON.stringify(F)),i(null),c(u=>u+1)},k=m=>{var S;i(((S=m.event.extendedProps)==null?void 0:S.originalEvent)||m.event)},g=m=>{var F;const S=(F=m.event.extendedProps)==null?void 0:F.type;return S==="Klausur"?["event-klausur"]:S==="Vorlesung"?["event-vorlesung"]:S!=null&&S.toLowerCase().includes("übung")?["event-uebung"]:S!=null&&S.toLowerCase().includes("praktikum")?["event-praktikum"]:S==="custom"?["event-custom"]:[]},j=()=>i(null),v=m=>{f(m.dateStr),a(!0)},P=m=>{De(m),a(!1),c(S=>S+1)},A=()=>{localStorage.removeItem("notRelevantEvents"),c(m=>m+1)},T=[...s(),...X()];return e.jsxs("div",{className:d?"fixed inset-0 bg-transparent z-[9999] flex flex-col":"",children:[e.jsx("div",{className:d?"flex justify-end mb-2 pr-4 pt-4":"flex justify-end mb-2",children:e.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 shadow",onClick:()=>p(m=>!m),children:d?"Vollbild verlassen":"Vollbild"})}),d?e.jsx("div",{className:"flex-1 bg-white px-4 mx-4 pt-4 mt-8 flex flex-col",children:e.jsx(ee,{plugins:[se,ne,re],initialView:"timeGridWeek",headerToolbar:{left:"today,prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},eventClassNames:g,slotMinTime:"07:00:00",slotMaxTime:"20:00:00",slotDuration:"00:30:00",weekends:!1,weekNumbers:!0,events:T,locales:te,locale:"de",eventClick:k,dateClick:v,height:"-webkit-fill-available"},r)}):e.jsx(ee,{plugins:[se,ne,re],initialView:"timeGridWeek",headerToolbar:{left:"today,prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},eventClassNames:g,slotMinTime:"07:00:00",slotMaxTime:"20:00:00",slotDuration:"00:30:00",weekends:!1,weekNumbers:!0,events:T,locales:te,locale:"de",eventClick:k,dateClick:v},r),t&&e.jsx(Ee,{event:t,onClose:j,onDeleteEvent:C}),o&&e.jsx(Ce,{initialDate:n,onClose:()=>a(!1),onSave:P}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-700 hover:underline",onClick:A,children:"Verborgene Kurse zurücksetzen"})})]})},Ie=()=>e.jsx(B,{subtitle:"Asta",href:"https://asta-htw.de"}),$e=()=>e.jsx(B,{subtitle:"Saarfahrplan",href:"https://saarfahrplan.de/"}),Ke=({children:s})=>e.jsx("div",{className:"flex flex-col h-full gap-4",children:Z.Children.map(s,(t,i)=>e.jsx("div",{className:"flex-1 overflow-hidden",children:t},i))}),Me=({children:s,onClose:t})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:t,children:"×"}),s]})}),Ae=()=>{const{getOtherCoursesForStudy:s,addRelevantCourse:t,getCourses:i}=l.useContext(_),[o,a]=l.useState(""),[n,f]=l.useState(null),r=l.useMemo(()=>new Set(i().map(g=>g.key)),[i]),c=l.useMemo(()=>s().filter(g=>!r.has(g.key)),[s,r]),d=l.useMemo(()=>o?c.filter(g=>g.name.toLowerCase().includes(o.toLowerCase())):c,[c,o]),p=g=>{f(g)},C=()=>{n&&(t(n),f(null))},k=()=>{f(null)};return c.length===0?null:e.jsxs(e.Fragment,{children:[e.jsxs(oe,{storageKey:"allcourses_collapsable",defaultOpen:!1,subtitle:"Weitere Kurse im Studiengang",children:[e.jsx("input",{type:"text",placeholder:"Kurse durchsuchen...",value:o,onChange:g=>a(g.target.value),className:"w-full p-2 mb-3 border border-gray-300 rounded"}),e.jsx("ul",{className:"list-none p-0 m-0 max-h-[250px] overflow-y-auto",children:d.map(g=>e.jsx("li",{className:"py-2 px-1 border-b border-gray-200 cursor-pointer hover:bg-gray-100",onClick:()=>p(g),children:g.name},g.key))})]}),n&&e.jsx(Me,{onClose:k,children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"absolute -top-4 -right-4 text-gray-500 hover:text-gray-800 text-2xl",onClick:k,children:"×"}),e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Kurs hinzufügen"}),e.jsxs("p",{className:"mb-6",children:['Möchtest du den Kurs "',n.name,'" zusätzlich belegen?']}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:k,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Abbrechen"}),e.jsx("button",{onClick:C,className:"px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600",children:"Bestätigen"})]})]})})]})};function Re(){const{selectionStudy:s,selectionSemester:t}=l.useContext(_);return e.jsxs(e.Fragment,{children:[e.jsx(xe,{}),e.jsx("div",{className:"overflow-y-auto md:overflow-hidden",style:{height:"calc(100vh - 72px)"},children:s?t?e.jsxs(ge,{children:[e.jsxs(Ke,{children:[e.jsxs(W,{title:"Campusgeschehen",children:[e.jsx(we,{}),e.jsx(Se,{}),e.jsx(Q,{}),e.jsx(Ne,{}),e.jsx(Ie,{}),e.jsx(Q,{}),e.jsx($e,{})]}),e.jsx(W,{title:"Webmail",children:e.jsx(be,{})})]}),e.jsxs(W,{title:"Deine Kurse",children:[e.jsx(ve,{}),e.jsx(Q,{}),e.jsx(Ae,{}),e.jsx(ke,{})]}),e.jsx(W,{title:"Kalender",children:e.jsx(Oe,{})})]}):e.jsx(ae,{}):e.jsx(ae,{})})]})}function ze(){return e.jsx(he,{children:e.jsx(Re,{})})}de.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(ze,{})}));
