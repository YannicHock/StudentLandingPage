import{r as o,j as e,M as xe,a as ge,R as X,F as ue,b as se,l as ne,i as re,c as le,d as ae,e as fe}from"./vendor-CGc3Qqnn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function a(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(l){if(l.ep)return;l.ep=!0;const n=a(l);fetch(l.href,n)}})();const T=o.createContext({selectionStudy:null,selectionSemester:null,setSelectionStudy:()=>{},setSelectionSemester:()=>{},getFriendlyStudyName:()=>null,getFriendlySemesterName:()=>null,getCourses:()=>[],getOtherCoursesForStudy:()=>[],getWahlpflichtmodule:()=>[],getCalendarEvents:()=>[],addRelevantCourse:()=>{},studyOptions:{},semesterOptions:{}}),pe="userFieldOfStudy",be="userSemester",U="relevantEvents",ye=({children:r})=>{const[t,a]=o.useState(null),[c,l]=o.useState(null),[n,m]=o.useState({}),[s,x]=o.useState({}),[i,f]=o.useState({}),[y,E]=o.useState(0);o.useEffect(()=>{const d=localStorage.getItem(pe),g=localStorage.getItem(be);d&&a(d),d&&g&&l(g)},[]),o.useEffect(()=>{(async()=>{try{const g=await fetch("courses.json");if(!g.ok)throw new Error("Failed to fetch courses");const p=await g.json();m(p)}catch(g){console.error("Error fetching courses:",g)}})()},[]),o.useEffect(()=>{(async()=>{try{const g=await fetch("options.json");if(!g.ok)throw new Error("Failed to fetch options");const p=await g.json();x(p.studyOptions),f(p.semesterOptions)}catch(g){console.error("Error fetching options:",g)}})()},[]);const h=o.useMemo(()=>Object.fromEntries(Object.entries(s).filter(([d])=>{const g=n[d];return g?Object.values(g).some(p=>Array.isArray(p)&&p.length>0):!1})),[s,n]),w=o.useMemo(()=>{if(!t||!n[t])return{};const d=n[t];return Object.fromEntries(Object.entries(i).filter(([g])=>{const p=d[g];return p&&p.length>0}))},[i,n,t]),k=d=>d&&s[d]||null,B=d=>d&&i[d]||null;function L(d){const g=/^(\d{2})\.(\d{2})\.(\d{4})$/.exec(d);if(!g)return null;const[,p,C,M]=g;return new Date(Number(M),Number(C)-1,Number(p))}const P=d=>{const g=JSON.parse(localStorage.getItem(U)||"[]");if(d.klausurdate){const p=L(d.klausurdate)||new Date(d.klausurdate);if(p&&!isNaN(p.getTime())){const C=`${d.key}_Klausur_${p.toISOString().slice(0,10)}`;g.includes(C)||g.push(C)}}Array.isArray(d.lectures)&&d.lectures.forEach(p=>{const C=`${d.key}_${p.type}_${p.day}_${p.start}`;g.includes(C)||g.push(C)}),localStorage.setItem(U,JSON.stringify(g)),E(p=>p+1)},j=()=>{var M;if(!t)return[];const d=c?((M=n[t])==null?void 0:M[c])||[]:[],g=JSON.parse(localStorage.getItem(U)||"[]"),p=new Set(g.map(O=>O.split("_")[0])),C=[];return n[t]&&Object.values(n[t]).forEach(O=>{Array.isArray(O)&&O.forEach(I=>{p.has(String(I.key))&&!d.some(K=>K.key===I.key)&&!C.some(K=>K.key===I.key)&&C.push(I)})}),n.wahlpflichtmodule&&Object.values(n.wahlpflichtmodule).flat().forEach(O=>{p.has(String(O.key))&&!d.some(I=>I.key===O.key)&&!C.some(I=>I.key===O.key)&&C.push(O)}),[...d,...C]},v=()=>{if(!t)return[];const d=n[t];if(!d)return[];const g=[];for(const p in d)if(p!==c){const C=d[p];Array.isArray(C)&&g.push(...C)}return g},S=d=>{var g;return((g=n.wahlpflichtmodule)==null?void 0:g[d])||[]},$=()=>{const d=j(),g=[],p=new Date("2025-04-01"),C=new Date("2025-07-18"),M=JSON.parse(localStorage.getItem("notRelevantEvents")||"[]"),O=JSON.parse(localStorage.getItem(U)||"[]"),I={Montag:1,Dienstag:2,Mittwoch:3,Donnerstag:4,Freitag:5,Samstag:6,Sonntag:0},K=u=>{g.some(D=>{var b,N;return((b=D.extendedProps)==null?void 0:b.seriesKey)===((N=u.extendedProps)==null?void 0:N.seriesKey)&&D.start===u.start})||g.push(u)},{wahlpflichtmodule:te,...he}=n;return[...Object.values(he).flatMap(u=>Object.values(u).flat()),...te?Object.values(te).flat():[]].forEach(u=>{let D=null;if(u.klausurdate&&(D=L(u.klausurdate)||new Date(u.klausurdate)),D&&!isNaN(D.getTime())){D.setHours(9,0,0,0);const b=new Date(D);b.setHours(12,0,0,0);const N=`${u.key}_Klausur_${D.toISOString().slice(0,10)}`;O.includes(N)&&!M.includes(N)&&K({title:`Klausur: ${u.name}${u.room?` (${u.room})`:""}`,start:D.toISOString().slice(0,16),end:b.toISOString().slice(0,16),description:`Klausur für ${u.name}${u.room?` im Raum ${u.room}`:""}`,extendedProps:{lecturer:u.lecturer,room:u.room,type:"Klausur",seriesKey:N}})}Array.isArray(u.lectures)&&u.lectures.forEach(b=>{const N=new Date(p),V=I[b.day];if(V===void 0)return;const G=(V+7-N.getDay())%7;N.setDate(N.getDate()+G);const[J,Y]=b.start.split(":").map(Number),z=`${u.key}_${b.type}_${b.day}_${b.start}`;if(O.includes(z)&&!M.includes(z))for(let R=new Date(N);R<=C;R.setDate(R.getDate()+7)){const _=new Date(R);_.setHours(J,Y,0,0);const F=new Date(_);F.setMinutes(F.getMinutes()+Number(b.duration));const A=b.room||u.room;K({title:`${u.name}${A?` (${A})`:""}`,start:_.toISOString().slice(0,16),end:F.toISOString().slice(0,16),description:`${u.name}${A?` (${A})`:""}`,extendedProps:{lecturer:u.lecturer,room:A,type:b.type,seriesKey:z}})}})}),d.forEach(u=>{let D=null;if(u.klausurdate&&(D=L(u.klausurdate)||new Date(u.klausurdate)),D&&!isNaN(D.getTime())){D.setHours(9,0,0,0);const b=new Date(D);b.setHours(12,0,0,0);const N=`${u.key}_Klausur_${D.toISOString().slice(0,10)}`;!M.includes(N)&&!O.includes(N)&&K({title:`Klausur: ${u.name}${u.room?` (${u.room})`:""}`,start:D.toISOString().slice(0,16),end:b.toISOString().slice(0,16),description:`Klausur für ${u.name}${u.room?` im Raum ${u.room}`:""}`,extendedProps:{lecturer:u.lecturer,room:u.room,type:"Klausur",seriesKey:N}})}Array.isArray(u.lectures)&&u.lectures.forEach(b=>{const N=new Date(p),V=I[b.day];if(V===void 0)return;const G=(V+7-N.getDay())%7;N.setDate(N.getDate()+G);const[J,Y]=b.start.split(":").map(Number),z=`${u.key}_${b.type}_${b.day}_${b.start}`;if(!(M.includes(z)||O.includes(z)))for(let R=new Date(N);R<=C;R.setDate(R.getDate()+7)){const _=new Date(R);_.setHours(J,Y,0,0);const F=new Date(_);F.setMinutes(F.getMinutes()+Number(b.duration));const A=b.room||u.room;K({title:`${u.name}${A?` (${A})`:""}`,start:_.toISOString().slice(0,16),end:F.toISOString().slice(0,16),description:`${u.name}${A?` (${A})`:""}`,extendedProps:{lecturer:u.lecturer,room:A,type:b.type,seriesKey:z}})}})}),g};return e.jsx(T.Provider,{value:{selectionStudy:t,selectionSemester:c,setSelectionStudy:a,setSelectionSemester:l,getFriendlyStudyName:k,getFriendlySemesterName:B,getCourses:j,getOtherCoursesForStudy:v,getWahlpflichtmodule:S,getCalendarEvents:$,addRelevantCourse:P,studyOptions:h,semesterOptions:w},children:r},y)},ie=()=>{const{selectionStudy:r,selectionSemester:t,setSelectionStudy:a,setSelectionSemester:c,studyOptions:l,semesterOptions:n}=o.useContext(T),m=i=>{const f=i.target.value;a(f),c(null),localStorage.setItem("userFieldOfStudy",f),localStorage.removeItem("userSemester")},s=i=>{const f=i.target.value;c(f),localStorage.setItem("userSemester",f)},x=r?Object.entries(n).map(([i,f])=>({value:i,label:f})):[];return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-gray-100",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-blue-700",children:"Willkommen zur Auswahlseite"}),e.jsx("div",{className:"w-full max-w-xs space-y-4",children:r?t?e.jsx(e.Fragment,{}):e.jsxs("select",{defaultValue:"",onChange:s,className:"w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"",disabled:!0,children:"Bitte zweite Auswahl treffen..."}),x.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]},r):e.jsxs("select",{defaultValue:"",onChange:m,className:"w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"",disabled:!0,children:"Bitte erste Auswahl treffen..."}),Object.entries(l).map(([i,f])=>e.jsx("option",{value:i,children:f},i))]})})]})},je=()=>{const{selectionStudy:r,selectionSemester:t,setSelectionStudy:a,setSelectionSemester:c,getFriendlyStudyName:l,getFriendlySemesterName:n}=o.useContext(T),m=()=>{c(null),localStorage.removeItem("userFieldOfStudy"),localStorage.removeItem("userSemester")},s=()=>{a(null),c(null),localStorage.removeItem("userFieldOfStudy"),localStorage.removeItem("userSemester"),localStorage.removeItem("relevantEvents"),localStorage.removeItem("notRelevantEvents"),window.location.reload()},x=l(r),i=n(t);return e.jsx("header",{className:"bg-blue-700 text-white shadow-md",children:e.jsxs("div",{className:"container mx-auto flex items-center justify-between py-4 px-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"icon.svg",alt:"Logo",className:"h-8 w-8"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Student Landing Page"})]}),e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-xs text-gray-300 flex flex-col items-end",children:[x&&e.jsx("span",{children:x}),i&&e.jsx("span",{children:i})]}),e.jsxs("button",{onClick:m,className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded transition",title:"Studienwahl und Semester zurücksetzen",children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"Semesterauswahl"})]}),e.jsxs("button",{onClick:s,className:"flex items-center gap-1 bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded transition",title:"Alle gespeicherten Daten löschen",children:[e.jsx(ge,{size:18}),e.jsx("span",{children:"Alle Daten löschen"})]})]})]})})},H=({title:r,children:t})=>e.jsxs("div",{className:"w-full h-full bg-white shadow-xl border border-gray-200 rounded-lg p-6 pt-0 flex flex-col overflow-y-scroll",children:[e.jsxs("div",{className:"sticky top-0 bg-white z-10",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800 text-center mb-2 mt-6",children:r}),e.jsx("hr",{className:"border-gray-300"})]}),e.jsx("div",{className:"flex-grow pt-4",children:t})]}),ve=({children:r})=>e.jsx("div",{className:"w-full h-[300vh] md:h-full overflow-hidden flex flex-col md:grid md:grid-cols-3 gap-6 bg-gray-100 p-4 rounded-lg shadow-md",children:X.Children.toArray(r).map((t,a)=>e.jsx("div",{className:"flex-1 h-full overflow-hidden",children:t},a))}),Se=({sender:r,subject:t,content:a,read:c,onClick:l})=>e.jsxs("div",{className:`w-full bg-white shadow-md border border-gray-300 rounded-lg p-2 hover:bg-gray-100 cursor-pointer relative ${c?"opacity-75":"font-bold"}`,onClick:l,children:[!c&&e.jsx("span",{className:"absolute top-2 right-2 text-blue-500",children:"●"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500 truncate",children:r}),e.jsx("div",{className:"text-sm font-semibold text-gray-800 truncate",children:t}),e.jsx("div",{className:"text-xs text-gray-600 mt-1 truncate",children:a})]})]}),Ne=({senderName:r,senderEmail:t,subject:a,content:c,cc:l,attachments:n,onClose:m})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-3xl relative",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:m,children:"×"}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Von: ",r," <",t,">"]}),l&&l.length>0&&e.jsxs("p",{className:"text-sm text-gray-500",children:["CC: ",l.join(", ")]})]}),n&&n.length>0&&e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Anhänge:"}),e.jsx("div",{className:"max-h-12",children:e.jsx("ul",{className:"list-disc list-inside text-gray-800",children:n.map((s,x)=>e.jsx("li",{children:s},x))})})]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-4",children:e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:c})}),e.jsx("div",{className:"border-t border-gray-300 pt-4 mt-4 flex justify-end",children:e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>alert("Reply functionality not implemented yet"),children:"Antworten"})})]})}),we=()=>{const[r,t]=o.useState(null),[a,c]=o.useState(!1),[l,n]=o.useState([{senderName:"Professor Müller",senderEmail:"mueller@university.de",subject:"Raumänderung",content:"Die morgige Vorlesung findet im Raum 204 statt, anstatt in Raum 101. Bitte beachten Sie diese Änderung.",cc:["assistenz@university.de"],attachments:["Vorlesungsplan.pdf"]},{senderName:"Universitätsverwaltung",senderEmail:"verwaltung@university.de",subject:"Erinnerung an Rückmeldung",content:"Bitte stellen Sie sicher, dass Ihre Studiengebühren bis Ende des Monats bezahlt sind, um Verzögerungen zu vermeiden.",cc:[],attachments:[]},{senderName:"Bibliotheksdienst",senderEmail:"bibliothek@university.de",subject:"Überfällige Buchrückgabe",content:'Das Buch "Einführung in Algorithmen" ist überfällig. Bitte geben Sie es so bald wie möglich zurück.',cc:["student1@university.de","student2@university.de"],attachments:[]},{senderName:"Karrierezentrum",senderEmail:"karriere@university.de",subject:"Praktikumsmöglichkeiten",content:"Entdecken Sie die neuesten Praktikumsmöglichkeiten in Ihrem Studienbereich.",cc:[],attachments:["Praktikumsliste.pdf"]},{senderName:"Studierendenrat",senderEmail:"studierendenrat@university.de",subject:"Bevorstehendes Event: Hackathon",content:"Nehmen Sie dieses Wochenende am jährlichen Hackathon teil. Preise für die besten Teams!",cc:["team@university.de"],attachments:["HackathonDetails.pdf","Anmeldeformular.pdf"]},{senderName:"IT-Support",senderEmail:"support@university.de",subject:"Systemwartungsbenachrichtigung",content:"Das Universitätsportal wird am Samstag von 2 Uhr bis 6 Uhr wegen Wartungsarbeiten nicht verfügbar sein.",cc:[],attachments:[]},{senderName:"Kurskoordinator",senderEmail:"koordinator@university.de",subject:"Erinnerung an Abgabefrist",content:'Vergessen Sie nicht, Ihre Aufgabe für "Datenstrukturen" bis Freitag einzureichen.',cc:["professor@university.de"],attachments:["Aufgabenbeschreibung.pdf"]},{senderName:"Sportverein",senderEmail:"sport@university.de",subject:"Wöchentlicher Trainingsplan",content:"Der Trainingsplan für diese Woche wurde aktualisiert. Siehe die angehängte Datei.",cc:[],attachments:["Trainingsplan.pdf"]},{senderName:"Studierendenservice",senderEmail:"service@university.de",subject:"Verfügbarkeit von Beratungsterminen",content:"Neue Termine für Beratungssitzungen sind jetzt verfügbar. Buchen Sie noch heute Ihren Termin.",cc:["beratung@university.de"],attachments:[]},{senderName:"Campus-Sicherheit",senderEmail:"sicherheit@university.de",subject:"Sicherheitswarnung",content:"Bitte seien Sie vorsichtig im Bereich des Hauptparkplatzes aufgrund laufender Bauarbeiten.",cc:[],attachments:["Sicherheitsrichtlinien.pdf"]},{senderName:"Projektleiter",senderEmail:"projektleiter@university.de",subject:"Projektabschlussbericht",content:"Der Abschlussbericht des Projekts wurde fertiggestellt. Bitte überprüfen Sie die angehängten Dateien.",cc:["team@university.de","supervisor@university.de"],attachments:["Bericht.pdf","Diagramm1.png","Diagramm2.png","Diagramm3.png","Diagramm4.png","Diagramm5.png","Diagramm6.png","Diagramm7.png","Diagramm8.png","Diagramm9.png","Diagramm10.png"]}]),m=l.filter(i=>!i.read),s=i=>{t(i),c(!0),n(f=>f.map(y=>y===i?{...y,read:!0}:y))},x=()=>{c(!1),t(null)};return e.jsxs("div",{className:"space-y-4",children:[m.length>0?m.map((i,f)=>e.jsx(Se,{sender:i.senderName,subject:i.subject,content:i.content,read:i.read,onClick:()=>s(i)},f)):e.jsx("div",{className:"text-center p-4 text-gray-500",children:"Keine ungelesenen E-Mails vorhanden"}),a&&r&&e.jsx(Ne,{senderEmail:r.senderEmail,senderName:r.senderName,subject:r.subject,content:r.content,cc:r.cc,attachments:r.attachments,onClose:x})]})},ee=({subtitle:r,children:t,defaultOpen:a=!1,storageKey:c})=>{const[l,n]=o.useState(a);o.useEffect(()=>{const s=localStorage.getItem(c);s!==null&&n(s==="true")},[c]);const m=()=>{n(s=>(localStorage.setItem(c,(!s).toString()),!s))};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer py-2 border-b border-gray-300",onClick:m,children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r}),e.jsx("span",{className:"text-gray-500",children:l?"-":"+"})]}),l&&e.jsx("div",{className:"mt-2 text-gray-600",children:t})]})},ke=({children:r})=>e.jsx("div",{className:"flex flex-wrap -mx-2",children:X.Children.map(r,(t,a)=>e.jsx("div",{className:"w-full xl:w-1/2 px-2 mb-4",children:t},a))}),q=({subtitle:r,href:t})=>e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs font-medium text-blue-600 hover:underline",children:[r,e.jsx(ue,{className:"ml-1",size:14})]}),oe="absolute px-3 py-1 text-sm rounded border border-blue-500 text-blue-500 bg-transparent hover:bg-blue-100 transition-colors",ce="absolute px-2 py-0.5 text-xs rounded border border-blue-500 text-blue-500 bg-transparent hover:bg-blue-100 transition-colors",Ce=({name:r,room:t,lecturer:a,moduldatenbankUrl:c,anmeldenUrl:l,pvl:n="Keine",klausurdate:m,credits:s,hilfsmittel:x,courseKey:i})=>{const[f,y]=o.useState(!1);return e.jsxs("div",{className:`relative w-full min-h-[140px] bg-blue-50 rounded-xl shadow-2xl border border-gray-300 flex flex-col items-center justify-center p-4 pt-12 pb-12 mx-auto backdrop-blur-sm  ${f?"min-h-[220px]":""}`,children:[e.jsx("button",{className:`${ce} top-2.5 left-2.5 z-10`,children:e.jsx(q,{subtitle:"Prüfungsanmeldung",href:"https://sim.htwsaar.de/launchpad#Shell-home"})}),e.jsx("button",{className:`${ce} top-2.5 right-2.5 z-10`,children:e.jsx(q,{subtitle:"Kursanmeldung",href:l})}),e.jsx("button",{className:`${oe} bottom-2.5 left-2.5`,onClick:()=>y(E=>!E),children:f?"Weniger Infos":"Mehr Infos"}),e.jsx("button",{className:`${oe} bottom-2.5 right-2.5`,children:e.jsx(q,{subtitle:"Moduldatenbank",href:c})}),e.jsxs("span",{className:"text-center w-full text-base font-medium leading-tight",children:[e.jsx("span",{className:"text-blue-800",children:r}),e.jsx("br",{}),e.jsxs("span",{className:"text-gray-600 text-xs",children:["Raum: ",t]}),e.jsx("br",{}),e.jsxs("span",{className:"text-gray-600 text-xs",children:["Dozent: ",a]})]}),f&&e.jsx("div",{className:`w-full text-xs text-gray-700 bg-white rounded shadow-inner p-2 border border-gray-200 max-w-full overflow-hidden ${f?"mt-2 max-h-40":"max-h-0"}`,style:{zIndex:1},children:e.jsxs("dl",{className:"grid grid-cols-1 gap-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"PVL:"}),e.jsx("dd",{children:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"Klausurtermin:"}),e.jsx("dd",{children:m})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"Credits:"}),e.jsxs("dd",{children:[s," ECTS"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"Hilfsmittel:"}),e.jsx("dd",{children:x})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-semibold",children:"Anmeldeschlüssel:"}),e.jsx("dd",{children:i})]})]})})]})},Ee=()=>{const{getCourses:r}=o.useContext(T),t=r();return e.jsx(ee,{storageKey:"coursecolapsable",defaultOpen:!0,subtitle:"Kurse",children:e.jsx(ke,{children:t.map(a=>o.createElement(Ce,{...a,key:a.key,courseKey:a.key}))})})},W=({subtitle:r,href:t})=>e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[r,e.jsx(ue,{style:{marginLeft:4}})]})})}),De=()=>e.jsx(W,{subtitle:"Raumservice",href:"https://raumservice.htwsaar.de/index.php?mid=998&muid=0&muuid=0"}),Oe=()=>e.jsx(W,{subtitle:"Bibliothek",href:"https://www.htwsaar.de/studium-und-lehre/service-und-beratung/rund-ums-studium/bibliothek/bibliothek"}),Ie=()=>e.jsx(W,{subtitle:"Mensa",href:"https://mensaar.de/#/menu/htwcas"}),Z=()=>e.jsx("div",{style:{height:"3px",width:"100%",backgroundColor:"#888",margin:"15px 0",borderRadius:"1.5px"}}),Ae=({event:r,onClose:t,onDeleteEvent:a})=>{if(!r)return null;const{title:c,start:l,end:n,description:m,extendedProps:s={}}=r,x=(s==null?void 0:s.type)==="custom",i=!!(s!=null&&s.allDay),f=()=>{const h=s==null?void 0:s.seriesKey;if(!(!h&&!x)){if(x){const w=`custom_${c}_${l}_${n}`,k=JSON.parse(localStorage.getItem("notRelevantEvents")||"[]");k.includes(w)||(k.push(w),localStorage.setItem("notRelevantEvents",JSON.stringify(k)))}else if(typeof h=="string"){const w=JSON.parse(localStorage.getItem("notRelevantEvents")||"[]");w.includes(h)||(w.push(h),localStorage.setItem("notRelevantEvents",JSON.stringify(w)))}t()}},y=()=>{const h=s==null?void 0:s.seriesKey;if(!(!h&&!x)){if(x){const w=`custom_${c}_${l}_${n}`,k=JSON.parse(localStorage.getItem("relevantEvents")||"[]");k.includes(w)||(k.push(w),localStorage.setItem("relevantEvents",JSON.stringify(k)))}else if(typeof h=="string"){const w=JSON.parse(localStorage.getItem("relevantEvents")||"[]");w.includes(h)||(w.push(h),localStorage.setItem("relevantEvents",JSON.stringify(w)))}t()}},E=()=>{a&&a(r)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 min-w-[300px] max-w-[90vw]",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:c}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Start:"})," ",i?new Date(l).toLocaleDateString("de-DE"):new Date(l).toLocaleString("de-DE")]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Ende:"})," ",i?new Date(n).toLocaleDateString("de-DE"):new Date(n).toLocaleString("de-DE")]}),m&&e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Beschreibung:"})," ",m]}),s&&e.jsxs("div",{className:"mb-2",children:[typeof s.lecturer=="string"&&e.jsxs("p",{children:[e.jsx("strong",{children:"Dozent:"})," ",s.lecturer]}),typeof s.room=="string"&&e.jsxs("p",{children:[e.jsx("strong",{children:"Raum:"})," ",s.room]}),typeof s.type=="string"&&!x&&e.jsxs("p",{children:[e.jsx("strong",{children:"Typ:"})," ",s.type]}),i&&e.jsxs("p",{children:[e.jsx("strong",{children:"Ganztägig:"})," Ja"]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:t,children:"Schließen"}),!x&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",onClick:f,children:"Verbergen"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:y,children:"Semesterübergreifend anzeigen"})]}),x&&a&&e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",onClick:E,children:"Löschen"})]})]})})},$e=({initialDate:r,onClose:t,onSave:a})=>{const[c,l]=o.useState(""),[n,m]=o.useState(r||""),[s,x]=o.useState(r||""),[i,f]=o.useState(""),[y,E]=o.useState(""),[h,w]=o.useState(""),[k,B]=o.useState(!1),L=j=>{B(j.target.checked),j.target.checked&&(m(n?n.slice(0,10):""),x(s?s.slice(0,10):""))},P=j=>{j.preventDefault(),!(!c||!n||!s)&&a({title:c,start:k?n.slice(0,10):n,end:k?s.slice(0,10):s,description:i,extendedProps:{type:"custom",lecturer:y,room:h,allDay:k}})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("form",{className:"bg-white rounded-lg shadow-lg p-6 min-w-[300px] max-w-[90vw]",onSubmit:P,children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Kalendereintrag hinzufügen"}),e.jsxs("label",{className:"block mb-2",children:["Title:",e.jsx("input",{className:"w-full border p-1",value:c,onChange:j=>l(j.target.value),required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Ganztägig:",e.jsx("input",{type:"checkbox",className:"ml-2",checked:k,onChange:L})]}),e.jsxs("label",{className:"block mb-2",children:["Start:",e.jsx("input",{className:"w-full border p-1",type:k?"date":"datetime-local",value:n,onChange:j=>m(j.target.value),required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Ende:",e.jsx("input",{className:"w-full border p-1",type:k?"date":"datetime-local",value:s,onChange:j=>x(j.target.value),required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Beschreibung:",e.jsx("input",{className:"w-full border p-1",value:i,onChange:j=>f(j.target.value)})]}),e.jsxs("label",{className:"block mb-2",children:["Dozent:",e.jsx("input",{className:"w-full border p-1",value:y,onChange:j=>E(j.target.value)})]}),e.jsxs("label",{className:"block mb-2",children:["Raum:",e.jsx("input",{className:"w-full border p-1",value:h,onChange:j=>w(j.target.value)})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",onClick:t,children:"Abbrechen"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Speichern"})]})]})})},Q=()=>JSON.parse(localStorage.getItem("customEvents")||"[]"),Me=r=>{const t=Q(),a={...r,id:crypto.randomUUID(),extendedProps:{...r.extendedProps,type:"custom"}};t.push(a),localStorage.setItem("customEvents",JSON.stringify(t))},Re=r=>{let t=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//HTWCalendar//DE","CALSCALE:GREGORIAN","METHOD:PUBLISH"].join(`\r
`);return r.forEach(a=>{var i,f,y;const c=new Date(a.start),l=new Date(a.end),n=(E,h)=>h?E.toISOString().replace(/[-:]/g,"").split("T")[0]:E.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/g,""),m=!!((i=a.extendedProps)!=null&&i.allDay),s=n(c,m),x=n(l,m);t+=`\r
BEGIN:VEVENT`,t+=`\r
UID:${a.id||crypto.randomUUID()}`,m?(t+=`\r
DTSTART;VALUE=DATE:${s}`,t+=`\r
DTEND;VALUE=DATE:${x}`):(t+=`\r
DTSTART:${s}`,t+=`\r
DTEND:${x}`),t+=`\r
SUMMARY:${a.title}`,a.description&&(t+=`\r
DESCRIPTION:${a.description.replace(/\n/g,"\\n")}`),(f=a.extendedProps)!=null&&f.room&&(t+=`\r
LOCATION:${a.extendedProps.room}`),(y=a.extendedProps)!=null&&y.lecturer&&(t+=`\r
ORGANIZER:${a.extendedProps.lecturer}`),t+=`\r
END:VEVENT`}),t+=`\r
END:VCALENDAR`,t},Ke=()=>{const{getCalendarEvents:r}=o.useContext(T),[t,a]=o.useState(null),[c,l]=o.useState(!1),[n,m]=o.useState(null),[s,x]=o.useState(0),[i,f]=o.useState(!1);o.useEffect(()=>{if(!i)return;const v=S=>{S.key==="Escape"&&f(!1)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[i]);const y=v=>{const $=Q().filter(d=>d.id!==v.id);localStorage.setItem("customEvents",JSON.stringify($)),a(null),x(d=>d+1)},E=v=>{var S;a(((S=v.event.extendedProps)==null?void 0:S.originalEvent)||v.event)},h=v=>{var $;const S=($=v.event.extendedProps)==null?void 0:$.type;return S==="Klausur"?["event-klausur"]:S==="Vorlesung"?["event-vorlesung"]:S!=null&&S.toLowerCase().includes("übung")?["event-uebung"]:S!=null&&S.toLowerCase().includes("praktikum")?["event-praktikum"]:S==="custom"?["event-custom"]:[]},w=()=>a(null),k=v=>{m(v.dateStr),l(!0)},B=v=>{Me(v),l(!1),x(S=>S+1)},L=()=>{localStorage.removeItem("notRelevantEvents"),x(v=>v+1)},P=()=>{const v=Re(j),S=new Blob([v],{type:"text/calendar;charset=utf-8"}),$=URL.createObjectURL(S),d=document.createElement("a");d.href=$,d.setAttribute("download","htw-kalender.ics"),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL($)},j=[...r(),...Q()];return e.jsxs("div",{className:i?"fixed inset-0 bg-transparent z-[9999] flex flex-col":"",children:[e.jsxs("div",{className:i?"flex justify-end mb-2 pr-4 pt-4":"flex justify-end mb-2 gap-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 shadow",onClick:P,children:"Kalender exportieren"}),e.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 shadow",onClick:()=>f(v=>!v),children:i?"Vollbild verlassen":"Vollbild"})]}),i?e.jsx("div",{className:"flex-1 bg-white px-4 mx-4 pt-4 mt-8 flex flex-col",children:e.jsx(se,{plugins:[re,le,ae],initialView:"timeGridWeek",headerToolbar:{left:"today,prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},eventClassNames:h,slotMinTime:"07:00:00",slotMaxTime:"20:00:00",slotDuration:"00:30:00",weekends:!1,weekNumbers:!0,events:j,locales:ne,locale:"de",eventClick:E,dateClick:k,height:"-webkit-fill-available"},s)}):e.jsx(se,{plugins:[re,le,ae],initialView:"timeGridWeek",headerToolbar:{left:"today,prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},eventClassNames:h,slotMinTime:"07:00:00",slotMaxTime:"20:00:00",slotDuration:"00:30:00",weekends:!1,weekNumbers:!0,events:j,locales:ne,locale:"de",eventClick:E,dateClick:k},s),t&&e.jsx(Ae,{event:t,onClose:w,onDeleteEvent:y}),c&&e.jsx($e,{initialDate:n,onClose:()=>l(!1),onSave:B}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-700 hover:underline",onClick:L,children:"Verborgene Kurse zurücksetzen"})})]})},Te=()=>e.jsx(W,{subtitle:"Asta",href:"https://asta-htw.de"}),Le=()=>e.jsx(W,{subtitle:"Saarfahrplan",href:"https://saarfahrplan.de/"}),ze=({children:r})=>e.jsx("div",{className:"flex flex-col h-full gap-4",children:X.Children.map(r,(t,a)=>e.jsx("div",{className:"flex-1 overflow-hidden",children:t},a))}),me=({children:r,onClose:t})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:t,children:"×"}),r]})}),_e=()=>{const{getOtherCoursesForStudy:r,addRelevantCourse:t,getCourses:a}=o.useContext(T),[c,l]=o.useState(""),[n,m]=o.useState(null),s=o.useMemo(()=>new Set(a().map(h=>h.key)),[a]),x=o.useMemo(()=>r().filter(h=>!s.has(h.key)),[r,s]),i=o.useMemo(()=>c?x.filter(h=>h.name.toLowerCase().includes(c.toLowerCase())):x,[x,c]),f=h=>{m(h)},y=()=>{n&&(t(n),m(null))},E=()=>{m(null)};return x.length===0?null:e.jsxs(e.Fragment,{children:[e.jsxs(ee,{storageKey:"allcourses_collapsable",defaultOpen:!1,subtitle:"Weitere Kurse im Studiengang",children:[e.jsx("input",{type:"text",placeholder:"Kurse durchsuchen...",value:c,onChange:h=>l(h.target.value),className:"w-full p-2 mb-3 border border-gray-300 rounded"}),e.jsx("ul",{className:"list-none p-0 m-0 max-h-[250px] overflow-y-auto",children:i.map(h=>e.jsx("li",{className:"py-2 px-1 border-b border-gray-200 cursor-pointer hover:bg-gray-100",onClick:()=>f(h),children:h.name},h.key))})]}),n&&e.jsx(me,{onClose:E,children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"absolute -top-4 -right-4 text-gray-500 hover:text-gray-800 text-2xl",onClick:E,children:"×"}),e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Kurs hinzufügen"}),e.jsxs("p",{className:"mb-6",children:['Möchtest du den Kurs "',n.name,'" zusätzlich belegen?']}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:E,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Abbrechen"}),e.jsx("button",{onClick:y,className:"px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600",children:"Bestätigen"})]})]})})]})},de=({title:r,courses:t,onCourseClick:a,storageKey:c})=>{const[l,n]=o.useState(""),m=o.useMemo(()=>l?t.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())):t,[t,l]);return t.length===0?null:e.jsxs(ee,{storageKey:c,defaultOpen:!1,subtitle:r,children:[e.jsx("input",{type:"text",placeholder:"Kurse durchsuchen...",value:l,onChange:s=>n(s.target.value),className:"w-full p-2 mb-3 border border-gray-300 rounded"}),e.jsx("ul",{className:"list-none p-0 m-0 max-h-[250px] overflow-y-auto",children:m.map(s=>e.jsxs("li",{className:"py-2 px-3 border-b border-gray-200 cursor-pointer hover:bg-gray-100",onClick:()=>a(s),children:[e.jsx("div",{className:"font-semibold",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.credits," ECTS",s.lectures&&s.lectures.length>0&&e.jsxs(e.Fragment,{children:[" · ",s.lectures.map((x,i)=>{var f;return e.jsxs("span",{children:[x.day.substring(0,2),", ",x.start," Uhr",i<(((f=s.lectures)==null?void 0:f.length)??0)-1&&", "]},i)})]})]})]},s.key))})]})},Fe=()=>{const{getWahlpflichtmodule:r,addRelevantCourse:t,getCourses:a,selectionSemester:c}=o.useContext(T),[l,n]=o.useState(null),m=o.useMemo(()=>new Set(a().map(h=>h.key)),[a]),s=o.useMemo(()=>r("informatik").filter(h=>!m.has(h.key)),[r,m]),x=o.useMemo(()=>r("nicht_informatik").filter(h=>!m.has(h.key)),[r,m]),i=h=>{n(h)},f=()=>{l&&(t(l),n(null))},y=()=>{n(null)};return!c||!["4","5","6"].includes(c)?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx(de,{title:"Informatik-spezifische Wahlpflichtmodule",courses:s,onCourseClick:i,storageKey:"wp_info_collapsable"})}),e.jsx("div",{className:"mt-4",children:e.jsx(de,{title:"Nicht-Informatik-spezifische Wahlpflichtmodule",courses:x,onCourseClick:i,storageKey:"wp_noninfo_collapsable"})}),l&&e.jsx(me,{onClose:y,children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"absolute -top-4 -right-4 text-gray-500 hover:text-gray-800 text-2xl",onClick:y,children:"×"}),e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Wahlpflichtmodul hinzufügen"}),e.jsxs("p",{className:"mb-4",children:['Möchtest du das Modul "',l.name,'" zusätzlich belegen?']}),l.moduldatenbankUrl&&e.jsx("div",{className:"mb-6 text-center",children:e.jsx("a",{href:l.moduldatenbankUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:"Zur Moduldatenbank"})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:y,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Abbrechen"}),e.jsx("button",{onClick:f,className:"px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600",children:"Bestätigen"})]})]})})]})};function Be(){const{selectionStudy:r,selectionSemester:t}=o.useContext(T);return e.jsxs(e.Fragment,{children:[e.jsx(je,{}),e.jsx("div",{className:"overflow-y-auto md:overflow-hidden",style:{height:"calc(100vh - 72px)"},children:r?t?e.jsxs(ve,{children:[e.jsxs(H,{title:"Deine Kurse",children:[e.jsx(Ee,{}),e.jsx(Fe,{}),e.jsx(Z,{}),e.jsx(_e,{})]}),e.jsx(H,{title:"Kalender",children:e.jsx(Ke,{})}),e.jsxs(ze,{children:[e.jsx(H,{title:e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"text-center",children:"Neue eMails"}),e.jsx("a",{href:"https://webmail.hiz-saarland.de",target:"_blank",className:"absolute right-0 top-1/2 -translate-y-1/2 mr-1 text-blue-500 hover:text-blue-700",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]}),children:e.jsx(we,{})}),e.jsxs(H,{title:"Campusgeschehen",children:[e.jsx(Ie,{}),e.jsx(De,{}),e.jsx(Z,{}),e.jsx(Oe,{}),e.jsx(Te,{}),e.jsx(Z,{}),e.jsx(Le,{})]})]})]}):e.jsx(ie,{}):e.jsx(ie,{})})]})}function Pe(){return e.jsx(ye,{children:e.jsx(Be,{})})}fe.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(Pe,{})}));
